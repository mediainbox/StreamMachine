{
  "version": 3,
  "file": "stream_group.js",
  "sourceRoot": "../../../../../src/streammachine/master/streams/",
  "sources": [
    "stream_group.coffee"
  ],
  "names": [],
  "mappings": "AAAA,IAAA;;AAAA,MAAM,CAAC,OAAP,GAAuB,cAAN,MAAA,YAAA,QAA0B,OAAA,CAAQ,QAAR,CAAiB,CAAC,aAA5C;EACb,WAAa,IAAA,QAAA,CAAA;;IAAC,IAAC,CAAA;IAAI,IAAC,CAAA;IAGhB,IAAC,CAAA,OAAD,GAAkB,CAAA;IAClB,IAAC,CAAA,WAAD,GAAkB,CAAA;IAClB,IAAC,CAAA,UAAD,GAAkB;EALT,CAAjB;;;EASI,SAAW,CAAC,MAAD,CAAA;AACf,QAAA,OAAA,EAAA;IAAQ,IAAG,CAAC,IAAC,CAAA,OAAO,CAAE,MAAM,CAAC,GAAT,CAAZ;MACI,IAAC,CAAA,MAAM,CAAC,KAAR,CAAc,CAAA,GAAA,CAAA,CAAM,IAAC,CAAA,GAAP,CAAA,gBAAA,CAAA,CAA6B,MAAM,CAAC,GAApC,CAAA,CAAd;MAEA,IAAC,CAAA,OAAO,CAAE,MAAM,CAAC,GAAT,CAAR,GAAyB,OAFrC;;MAKY,OAAA,GAAU,CAAA,CAAA,GAAA;QACN,IAAC,CAAA,MAAM,CAAC,KAAR,CAAc,CAAA,GAAA,CAAA,CAAM,IAAC,CAAA,GAAP,CAAA,uBAAA,CAAA,CAAqC,MAAM,CAAC,GAA5C,CAAA,CAAd;eACA,OAAO,IAAC,CAAA,OAAO,CAAE,MAAM,CAAC,GAAT;MAFT;MAIV,MAAM,CAAC,EAAP,CAAU,YAAV,EAAwB,OAAxB;MAEA,MAAM,CAAC,EAAP,CAAU,QAAV,EAAoB,CAAA,CAAA,GAAA;QAChB,IAAa,MAAM,CAAC,IAAI,CAAC,KAAZ,KAAqB,IAAC,CAAA,GAAnC;iBAAA,OAAA,CAAA,EAAA;;MADgB,CAApB,EAXZ;;8DAeuC,CAAE,WAA7B,CAAyC,IAAzC,WAhBJ;;EADO,CATf;;;EA8BI,MAAQ,CAAA,CAAA;AACZ,QAAA,CAAA,EAAA,GAAA,EAAA,CAAA,EAAA;IAAQ,OAAA,GAAU,CAAA;AACV;IAAA,KAAA,QAAA;;MAAA,OAAO,CAAC,CAAD,CAAP,GAAa,CAAC,CAAC,MAAF,CAAA;IAAb;WAEA;MAAA,EAAA,EAAY,IAAC,CAAA,GAAb;MACA,OAAA,EAAY;IADZ;EAJI;;AA/BK;;AAAjB",
  "sourcesContent": [
    "module.exports = class StreamGroup extends require(\"events\").EventEmitter\r\n    constructor: (@key,@logger) ->\r\n        super()\r\n\r\n        @streams        = {}\r\n        @transcoders    = {}\r\n        @hls_min_id     = null\r\n\r\n#----------\r\n\r\n    addStream: (stream) ->\r\n        if !@streams[ stream.key ]\r\n            @logger.debug \"SG #{@key}: Adding stream #{stream.key}\"\r\n\r\n            @streams[ stream.key ] = stream\r\n\r\n            # listen in case it goes away\r\n            delFunc = =>\r\n                @logger.debug \"SG #{@key}: Stream disconnected: #{ stream.key }\"\r\n                delete @streams[ stream.key ]\r\n\r\n            stream.on \"disconnect\", delFunc\r\n\r\n            stream.on \"config\", =>\r\n                delFunc() if stream.opts.group != @key\r\n\r\n            # if HLS is enabled, sync the stream to the rest of the group\r\n            stream.rewind.hls_segmenter?.syncToGroup @\r\n\r\n#----------\r\n\r\n    status: ->\r\n        sstatus = {}\r\n        sstatus[k] = s.status() for k,s of @streams\r\n\r\n        id:         @key\r\n        streams:    sstatus\r\n\r\n#----------\r\n"
  ]
}